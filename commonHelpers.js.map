{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/bi_x-octagon.svg","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '42750386-32909fc47eb0ca0c6c8fc758e';\n\nexport async function getPhotos(query, page) {\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page,\n    per_page: 15,\n  };\n\n  const url = `${BASE_URL}`;\n\n  const res = await axios.get(url, { params });\n  return res.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionsDelay: 250,\n});\n\nexport function photoItemTemplate(photoObj) {\n  const {\n    webformatURL,\n    largeImageURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = photoObj;\n  return `\n     <li class=\"gallery-item\">\n          <a href=\"${largeImageURL}\" class=\"photo-link\">\n            <img class=\"photo\"\n                width=\"360\"\n                height=\"152\"\n                src=\"${webformatURL}\" \n                alt=\"${tags}\" \n            />\n          </a>\n          <p class=\"info-photo-box\">\n            <span class=\"info-item\"><b>Likes</b><br/>${likes}</span>\n            <span class=\"info-item\"><b>Views</b><br/>${views}</span>\n            <span class=\"info-item\"><b>Comments</b><br/>${comments}</span>\n            <span class=\"info-item\"><b>Downloads</b><br/>${downloads}</span>\n          </p>\n        </li>\n    `;\n}\n\nexport function photosTemplate(arr) {\n  return arr.map(photoItemTemplate).join('');\n}\n\nexport function refreshLightbox() {\n  lightbox.refresh();\n}\n","export default \"__VITE_ASSET__3108d0c6__\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getPhotos } from './js/pixabay-api';\nimport { photosTemplate, refreshLightbox } from './js/render-functions';\n\nimport error from './img/bi_x-octagon.svg';\n\nconst loader = document.querySelector('.loader-container');\nconst formEl = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMore = document.querySelector('.load-btn');\n\nlet searchInputValue;\nlet page = 1;\nlet perPage = 15;\n\nformEl.addEventListener('submit', onSubmitHandler);\nloadMore.addEventListener('click', onBtnClickHandler);\n\nasync function onSubmitHandler(e) {\n  e.preventDefault();\n  gallery.innerHTML = '';\n  page = 1;\n\n  searchInputValue = e.target.elements.query.value.trim();\n\n  if (!searchInputValue) {\n    showError('Search line is empty'), hideLoader();\n    return;\n  }\n\n  showLoader();\n\n  try {\n    const data = await getPhotos(searchInputValue, page);\n\n    if (data.totalHits === 0) {\n      hideLoadBtn();\n      showError(\n        'Sorry, there are no images matching <br/> your search query. Please, try again!'\n      );\n      return;\n    }\n    infoMessage(`We found ${data.totalHits} photos`);\n    const markup = photosTemplate(data.hits);\n    gallery.innerHTML = markup;\n    refreshLightbox();\n    if (data.totalHits < perPage) {\n      hideLoadBtn();\n    } else {\n      showLoadBtn();\n    }\n  } catch {\n    showError('Something went wrong!!!');\n  } finally {\n    hideLoader();\n    e.target.reset();\n  }\n}\n\nasync function onBtnClickHandler() {\n  page += 1;\n  showLoader();\n\n  const data = await getPhotos(searchInputValue, page);\n  const lastPage = Math.ceil(data.totalHits / perPage);\n  const markup = photosTemplate(data.hits);\n  gallery.insertAdjacentHTML('beforeend', markup);\n  refreshLightbox();\n\n  refreshLightbox();\n  if (lastPage === page) {\n    hideLoadBtn();\n    infoMessage(\"We're sorry, but you've reached the end of search results\");\n  }\n\n  hideLoader();\n  getScrollByLoadBtnClick();\n}\n\nfunction getScrollByLoadBtnClick() {\n  const cardOfGallery = gallery.querySelector('.gallery-item');\n  const scrollHeight = Number.parseInt(\n    cardOfGallery.getBoundingClientRect().height\n  );\n  const options = {\n    top: scrollHeight * 2,\n    behavior: 'smooth',\n  };\n  window.scrollBy(options);\n}\n\nfunction infoMessage(message) {\n  return iziToast.info({\n    title: '',\n    message,\n    position: 'topRight',\n  });\n}\n\nfunction showError(message) {\n  return iziToast.error({\n    title: '',\n    backgroundColor: '#c55f5f',\n    titleColor: '#fff',\n    messageColor: '#fff',\n    message,\n    iconUrl: error,\n    color: '#fff',\n    position: 'topRight',\n    progressBarColor: '#B51B1B',\n  });\n}\n\nfunction showLoader() {\n  return loader.classList.remove('is-hidden');\n}\n\nfunction hideLoader() {\n  return loader.classList.add('is-hidden');\n}\n\nfunction showLoadBtn() {\n  loadMore.classList.remove('is-hidden');\n}\nfunction hideLoadBtn() {\n  loadMore.classList.add('is-hidden');\n}\n"],"names":["BASE_URL","API_KEY","getPhotos","query","page","params","url","axios","lightbox","SimpleLightbox","photoItemTemplate","photoObj","webformatURL","largeImageURL","tags","likes","views","comments","downloads","photosTemplate","arr","refreshLightbox","error","loader","formEl","gallery","loadMore","searchInputValue","perPage","onSubmitHandler","onBtnClickHandler","showError","hideLoader","showLoader","data","hideLoadBtn","infoMessage","markup","showLoadBtn","lastPage","getScrollByLoadBtnClick","cardOfGallery","options","message","iziToast"],"mappings":"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"}